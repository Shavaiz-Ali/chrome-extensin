chrome.runtime.onInstalled.addListener(async()=>{console.log("Background script installed and running");const t=await(async()=>{try{const a=await(await fetch("http://localhost:5000/api/transltions/get-translations",{method:"GET"})).json();if(console.log(a),a.status===200)return a.translations[0].translations}catch(o){console.log(o)}})();console.log(t),chrome.storage.sync.set({translations:t},()=>{console.log("Translations loaded and stored in Chrome storage.")})});async function e(){return new Promise(n=>{chrome.storage.sync.get("translations",t=>{n(t.translations||{})})})}async function l(n,t){console.log("translate api hit successfully",n,t);try{const o=`https://free-google-translator.p.rapidapi.com/external-api/free-google-translator?from=en&to=${t}&query=${n}`,s=await(await fetch(o,{method:"POST",headers:{"x-rapidapi-key":"c12f85e2f8msh5cca653a58d801fp15981ejsn9271b771e623","x-rapidapi-host":"free-google-translator.p.rapidapi.com","Content-Type":"application/json"},body:{translate:"rapidapi"}})).json();return console.log(s),s.translation}catch(o){return console.error("Error fetching translation:",o),null}}chrome.runtime.onMessage.addListener(async(n,t,o)=>{if(console.log(n),n.action==="translateText"){const a=await e(),r=await l(n.text,n.targetLanguage);if(r){const s={...a,[n==null?void 0:n.text]:r};await chrome.storage.sync.set({translations:s})}else o({error:"Translation failed"})}return!0});
